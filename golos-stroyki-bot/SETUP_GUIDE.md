# üìö –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –£–°–¢–ê–ù–û–í–ö–ï –ò –ù–ê–°–¢–†–û–ô–ö–ï TELEGRAM –ë–û–¢–ê
# "–ì–æ–ª–æ—Å –°—Ç—Ä–æ–π–∫–∏" - –ö–∞—Ç–∞–ª–æ–≥ –ø–æ–¥—Ä—è–¥—á–∏–∫–æ–≤

## üìã –°–û–î–ï–†–ñ–ê–ù–ò–ï
1. [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è](#—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
2. [–°–æ–∑–¥–∞–Ω–∏–µ Telegram –±–æ—Ç–∞](#—Å–æ–∑–¥–∞–Ω–∏–µ-telegram-–±–æ—Ç–∞)
3. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-supabase)
4. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Yandex SpeechKit](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-yandex-speechkit)
5. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–±–æ—Ç–∞)
6. [–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞](#–∑–∞–ø—É—Å–∫-–±–æ—Ç–∞)
7. [–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º](#—Ä–µ—à–µ–Ω–∏–µ-–ø—Ä–æ–±–ª–µ–º)

---

## üîß –¢–†–ï–ë–û–í–ê–ù–ò–Ø

- Python 3.9 –∏–ª–∏ –≤—ã—à–µ
- –ê–∫–∫–∞—É–Ω—Ç Telegram
- –ê–∫–∫–∞—É–Ω—Ç Supabase (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π)
- –ê–∫–∫–∞—É–Ω—Ç Yandex Cloud (–¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –≥–æ–ª–æ—Å–∞, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## ü§ñ –°–û–ó–î–ê–ù–ò–ï TELEGRAM –ë–û–¢–ê

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ BotFather

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ **@BotFather**
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/newbot`
3. –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–ì–æ–ª–æ—Å –°—Ç—Ä–æ–π–∫–∏ –ö–∞—Ç–∞–ª–æ–≥")
4. –í–≤–µ–¥–∏—Ç–µ username –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "golossroyki_catalog_bot")
5. **BotFather –≤—ã–¥–∞—Å—Ç –≤–∞–º —Ç–æ–∫–µ–Ω** - —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ! –ü—Ä–∏–º–µ—Ä:
   ```
   123456789:ABCdefGHIjklMNOpqrsTUVwxyz
   ```

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞

–û—Ç–ø—Ä–∞–≤—å—Ç–µ BotFather –∫–æ–º–∞–Ω–¥—É `/setcommands` –∏ –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞.
–ó–∞—Ç–µ–º –æ—Ç–ø—Ä–∞–≤—å—Ç–µ:
```
start - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º
```

### –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏

1. –°–æ–∑–¥–∞–π—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π Telegram –∫–∞–Ω–∞–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä: @golossroyki)
2. –î–æ–±–∞–≤—å—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –∫–∞–Ω–∞–ª–∞
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ username –∫–∞–Ω–∞–ª–∞ (–æ–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö)

---

## üíæ –ù–ê–°–¢–†–û–ô–ö–ê SUPABASE

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [supabase.com](https://supabase.com)
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –∏–ª–∏ –≤–æ–π–¥–∏—Ç–µ
3. –ù–∞–∂–º–∏—Ç–µ **"New Project"**
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - **Name**: golossroyki (–∏–ª–∏ –ª—é–±–æ–µ –¥—Ä—É–≥–æ–µ)
   - **Database Password**: –ø—Ä–∏–¥—É–º–∞–π—Ç–µ –Ω–∞–¥—ë–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å (—Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ!)
   - **Region**: –≤—ã–±–µ—Ä–∏—Ç–µ –±–ª–∏–∂–∞–π—à–∏–π —Ä–µ–≥–∏–æ–Ω
5. –ù–∞–∂–º–∏—Ç–µ **"Create new project"** (—Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–π–º—ë—Ç 1-2 –º–∏–Ω—É—Ç—ã)

### –®–∞–≥ 2: –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–µ–π

1. –í –±–æ–∫–æ–≤–æ–º –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ **Settings** (‚öôÔ∏è)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **API**
3. –ù–∞–π–¥–∏—Ç–µ –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ:
   - **Project URL** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://abcdefgh.supabase.co`)
   - **anon public** –∫–ª—é—á (–¥–ª–∏–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞, –Ω–∞—á–∏–Ω–∞—é—â–∞—è—Å—è —Å `eyJ...`)

### –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –ø–æ–¥—Ä—è–¥—á–∏–∫–æ–≤

1. –í –±–æ–∫–æ–≤–æ–º –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ **SQL Editor**
2. –ù–∞–∂–º–∏—Ç–µ **"New query"**
3. –í—Å—Ç–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π SQL –∫–æ–¥:

```sql
-- –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã contractors (–ø–æ–¥—Ä—è–¥—á–∏–∫–∏)
CREATE TABLE contractors (
    id BIGSERIAL PRIMARY KEY,
    user_id BIGINT NOT NULL,
    username TEXT,
    name TEXT NOT NULL,
    city TEXT NOT NULL,
    specialization TEXT NOT NULL,
    experience TEXT NOT NULL,
    description TEXT NOT NULL,
    price TEXT NOT NULL,
    portfolio TEXT,
    contacts TEXT NOT NULL,
    status TEXT DEFAULT 'moderation',
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
CREATE INDEX idx_contractors_user_id ON contractors(user_id);
CREATE INDEX idx_contractors_city ON contractors(city);
CREATE INDEX idx_contractors_status ON contractors(status);
CREATE INDEX idx_contractors_specialization ON contractors(specialization);

-- –í–∫–ª—é—á–µ–Ω–∏–µ Row Level Security (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
ALTER TABLE contractors ENABLE ROW LEVEL SECURITY;

-- –ü–æ–ª–∏—Ç–∏–∫–∞: —Ä–∞–∑—Ä–µ—à–∏—Ç—å –≤—Å–µ–º —á–∏—Ç–∞—Ç—å —É—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–µ –∞–Ω–∫–µ—Ç—ã
CREATE POLICY "Allow read approved contractors"
ON contractors FOR SELECT
USING (status = 'approved');

-- –ü–æ–ª–∏—Ç–∏–∫–∞: —Ä–∞–∑—Ä–µ—à–∏—Ç—å –≤—Å–µ–º —Å–æ–∑–¥–∞–≤–∞—Ç—å –∞–Ω–∫–µ—Ç—ã
CREATE POLICY "Allow insert contractors"
ON contractors FOR INSERT
WITH CHECK (true);

-- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –ø–æ–ª—è–º
COMMENT ON TABLE contractors IS '–¢–∞–±–ª–∏—Ü–∞ —Å –∞–Ω–∫–µ—Ç–∞–º–∏ –ø–æ–¥—Ä—è–¥—á–∏–∫–æ–≤';
COMMENT ON COLUMN contractors.user_id IS 'Telegram ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è';
COMMENT ON COLUMN contractors.username IS 'Username –≤ Telegram';
COMMENT ON COLUMN contractors.name IS '–ò–º—è –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏';
COMMENT ON COLUMN contractors.city IS '–ì–æ—Ä–æ–¥ —Ä–∞–±–æ—Ç—ã';
COMMENT ON COLUMN contractors.specialization IS '–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (–≤–∏–¥—ã —Ä–∞–±–æ—Ç)';
COMMENT ON COLUMN contractors.experience IS '–û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã';
COMMENT ON COLUMN contractors.description IS '–û–ø–∏—Å–∞–Ω–∏–µ (–ø–æ—á–µ–º—É –≤—ã–±—Ä–∞—Ç—å –∏–º–µ–Ω–Ω–æ –µ–≥–æ)';
COMMENT ON COLUMN contractors.price IS '–û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω—ã–µ —Ü–µ–Ω—ã';
COMMENT ON COLUMN contractors.portfolio IS '–°—Å—ã–ª–∫–∞ –Ω–∞ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ';
COMMENT ON COLUMN contractors.contacts IS '–ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è —Å–≤—è–∑–∏';
COMMENT ON COLUMN contractors.status IS '–°—Ç–∞—Ç—É—Å: moderation, approved, rejected';
```

4. –ù–∞–∂–º–∏—Ç–µ **"Run"** (‚ñ∂Ô∏è) –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞
5. –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ "Success. No rows returned"

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü—ã

1. –í –±–æ–∫–æ–≤–æ–º –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ **Table Editor**
2. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞–±–ª–∏—Ü—É **contractors**
3. –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –ø—É—Å—Ç—É—é —Ç–∞–±–ª–∏—Ü—É —Å–æ –≤—Å–µ–º–∏ –∫–æ–ª–æ–Ω–∫–∞–º–∏

---

## üé§ –ù–ê–°–¢–†–û–ô–ö–ê YANDEX SPEECHKIT (–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û)

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –≥–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è:

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞ Yandex Cloud

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [cloud.yandex.ru](https://cloud.yandex.ru)
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å (–Ω—É–∂–µ–Ω –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞)
3. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –ø—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥ (–¥–∞—ë—Ç—Å—è 1000‚ÇΩ –Ω–∞ 60 –¥–Ω–µ–π)

### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞

1. –í –∫–æ–Ω—Å–æ–ª–∏ Yandex Cloud –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Service Accounts**
2. –ù–∞–∂–º–∏—Ç–µ **"Create service account"**
3. –í–≤–µ–¥–∏—Ç–µ –∏–º—è (–Ω–∞–ø—Ä–∏–º–µ—Ä: "speechkit-bot")
4. –î–æ–±–∞–≤—å—Ç–µ —Ä–æ–ª—å: **ai.speechkit-stt.user**
5. –ù–∞–∂–º–∏—Ç–µ **"Create"**

### –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ API –∫–ª—é—á–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **API keys**
3. –ù–∞–∂–º–∏—Ç–µ **"Create API key"**
4. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á** (–æ–Ω –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑!)

### –®–∞–≥ 4: –ü–æ–ª—É—á–µ–Ω–∏–µ Folder ID

1. –í –∫–æ–Ω—Å–æ–ª–∏ Yandex Cloud –≤–≤–µ—Ä—Ö—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞–π–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≤–∞—à–µ–≥–æ –∫–∞—Ç–∞–ª–æ–≥–∞
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω–µ–≥–æ
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **Folder ID** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `b1gxxxxxxxxxxxxxx`)

---

## üì¶ –£–°–¢–ê–ù–û–í–ö–ê –ë–û–¢–ê

### –®–∞–≥ 1: –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

–°–∫–∞—á–∞–π—Ç–µ –≤—Å–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞:
- `bot.py` - –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –±–æ—Ç–∞
- `keyboards.py` - –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –±–æ—Ç–∞
- `requirements.txt` - –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- `.env.example` - –ø—Ä–∏–º–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–∫

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –≤ –ø–∞–ø–∫–µ —Å –±–æ—Ç–æ–º –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
python -m venv venv

# –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
# –ù–∞ Windows:
venv\Scripts\activate
# –ù–∞ Mac/Linux:
source venv/bin/activate

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt
```

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `.env.example` –∏ –ø–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ –≤ `.env`
2. –û—Ç–∫—Ä–æ–π—Ç–µ `.env` –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```env
# –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç BotFather
BOT_TOKEN=123456789:ABCdefGHIjklMNOpqrsTUVwxyz

# –î–∞–Ω–Ω—ã–µ Supabase
SUPABASE_URL=https://abcdefgh.supabase.co
SUPABASE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Username –∫–∞–Ω–∞–ª–∞ (—Å @)
CHANNEL_USERNAME=@golossroyki

# Yandex SpeechKit (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ)
YANDEX_API_KEY=AQVNxxxxxxxxxxxxxxxxxxxxxxxxxxxx
YANDEX_FOLDER_ID=b1gxxxxxxxxxxxxxx
```

4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª

---

## üöÄ –ó–ê–ü–£–°–ö –ë–û–¢–ê

### –°–ø–æ—Å–æ–± 1: –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—É—Å–∫

```bash
python bot.py
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
INFO:__main__:–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω
```

### –°–ø–æ—Å–æ–± 2: –ó–∞–ø—É—Å–∫ —Å –∞–≤—Ç–æ-–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `watchdog`:
```bash
pip install watchdog
```

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `run_dev.py`:
```python
import subprocess
import sys
from watchdog.observers import Observer
from watchdog.events import FileSystemEventHandler
import time

class RestartHandler(FileSystemEventHandler):
    def __init__(self):
        self.process = None
        self.restart()
    
    def restart(self):
        if self.process:
            self.process.terminate()
            self.process.wait()
        self.process = subprocess.Popen([sys.executable, "bot.py"])
    
    def on_modified(self, event):
        if event.src_path.endswith('.py'):
            print("–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è, –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫...")
            self.restart()

if __name__ == "__main__":
    handler = RestartHandler()
    observer = Observer()
    observer.schedule(handler, ".", recursive=False)
    observer.start()
    
    try:
        while True:
            time.sleep(1)
    except KeyboardInterrupt:
        observer.stop()
        handler.process.terminate()
    
    observer.join()
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ:
```bash
python run_dev.py
```

---

## üêõ –†–ï–®–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú

### –û—à–∏–±–∫–∞: "Bot token is invalid"

**–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω –±–æ—Ç–∞

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ —Ñ–∞–π–ª–µ `.env`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª–∏ —Ç–æ–∫–µ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç BotFather
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –Ω–µ—Ç –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤

### –û—à–∏–±–∫–∞: "Failed to connect to Supabase"

**–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ Supabase

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL –∏ –∫–ª—é—á –≤ `.env`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–æ–µ–∫—Ç –≤ Supabase –∞–∫—Ç–∏–≤–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É

### –û—à–∏–±–∫–∞: "Table contractors does not exist"

**–ü—Ä–∏—á–∏–Ω–∞**: –¢–∞–±–ª–∏—Ü–∞ –Ω–µ —Å–æ–∑–¥–∞–Ω–∞ –≤ Supabase

**–†–µ—à–µ–Ω–∏–µ**:
1. –í–æ–π–¥–∏—Ç–µ –≤ Supabase
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –∑–∞–ø—Ä–æ—Å –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase"
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ –ø–æ—è–≤–∏–ª–∞—Å—å –≤ Table Editor

### –ë–æ—Ç –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É

**–ü—Ä–∏—á–∏–Ω–∞**: –ë–æ—Ç –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –∫–∞–Ω–∞–ª–∞

**–†–µ—à–µ–Ω–∏–µ**:
1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à –∫–∞–Ω–∞–ª
2. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã
3. –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ –µ–≥–æ @username
4. –î–∞–π—Ç–µ –ø—Ä–∞–≤–∞ "–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤"

### –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞—é—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Yandex SpeechKit

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á –∏ Folder ID –≤ `.env`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç –∏–º–µ–µ—Ç —Ä–æ–ª—å `ai.speechkit-stt.user`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–ª–∞–Ω—Å –≤ Yandex Cloud
4. –ï—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Yandex - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ç–µ–∫—Å—Ç

### –û—à–∏–±–∫–∞: "ModuleNotFoundError"

**–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

**–†–µ—à–µ–Ω–∏–µ**:
```bash
pip install -r requirements.txt
```

---

## üì± –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ë–û–¢–ê

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:

1. –ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ –≤ Telegram –ø–æ @username
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
3. –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –ø–æ–ø—Ä–æ—Å–∏—Ç—å –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–∞–Ω–∞–ª
4. –ü–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –∏ –Ω–∞–∂–º–∏—Ç–µ "–Ø –ø–æ–¥–ø–∏—Å–∞–ª—Å—è"
5. –í—ã–±–µ—Ä–∏—Ç–µ "‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å–µ–±—è –≤ –∫–∞—Ç–∞–ª–æ–≥"
6. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∞–Ω–∫–µ—Ç—É (–º–æ–∂–Ω–æ —Ç–µ–∫—Å—Ç–æ–º –∏–ª–∏ –≥–æ–ª–æ—Å–æ–º)
7. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ Supabase, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏—Å—å

---

## üîê –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

### –í–∞–∂–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

1. **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—É–±–ª–∏–∫—É–π—Ç–µ —Ñ–∞–π–ª `.env`** –≤ Git
2. –î–æ–±–∞–≤—å—Ç–µ `.env` –≤ `.gitignore`:
   ```
   .env
   venv/
   __pycache__/
   *.pyc
   ```
3. –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Row Level Security –≤ Supabase
5. –ù–µ —Ö—Ä–∞–Ω–∏—Ç–µ sensitive –¥–∞–Ω–Ω—ã–µ –≤ –∫–æ–¥–µ

---

## üìä –ú–û–ù–ò–¢–û–†–ò–ù–ì –ê–ù–ö–ï–¢

### –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–Ω–∫–µ—Ç –≤ Supabase:

1. –û—Ç–∫—Ä–æ–π—Ç–µ Supabase
2. Table Editor ‚Üí contractors
3. –í—ã —É–≤–∏–¥–∏—Ç–µ –≤—Å–µ –∞–Ω–∫–µ—Ç—ã —Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏:
   - `moderation` - –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏
   - `approved` - –æ–¥–æ–±—Ä–µ–Ω–æ
   - `rejected` - –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∞–Ω–∫–µ—Ç—ã:

```sql
-- –û–¥–æ–±—Ä–∏—Ç—å –∞–Ω–∫–µ—Ç—É
UPDATE contractors 
SET status = 'approved' 
WHERE id = 1;

-- –û—Ç–∫–ª–æ–Ω–∏—Ç—å –∞–Ω–∫–µ—Ç—É
UPDATE contractors 
SET status = 'rejected' 
WHERE id = 2;
```

---

## üÜò –ü–û–î–î–ï–†–ñ–ö–ê

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤:
   - [Telegram API Status](https://status.telegram.org/)
   - [Supabase Status](https://status.supabase.com/)

---

## üìù –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ù–ê–°–¢–†–û–ô–ö–ò

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π:

–û—Ç–∫—Ä–æ–π—Ç–µ `bot.py` –∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–æ–∫–∏ –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤.

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π –≤ –∞–Ω–∫–µ—Ç—É:

1. –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ `ContractorForm`
2. –î–æ–±–∞–≤—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—è
3. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã –≤ Supabase:
   ```sql
   ALTER TABLE contractors 
   ADD COLUMN new_field TEXT;
   ```

---

## ‚úÖ –ß–ï–ö–õ–ò–°–¢ –ó–ê–ü–£–°–ö–ê

- [ ] –°–æ–∑–¥–∞–Ω –±–æ—Ç —á–µ—Ä–µ–∑ @BotFather
- [ ] –ü–æ–ª—É—á–µ–Ω —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
- [ ] –°–æ–∑–¥–∞–Ω –ø—Ä–æ–µ–∫—Ç –≤ Supabase
- [ ] –ü–æ–ª—É—á–µ–Ω—ã URL –∏ –∫–ª—é—á Supabase
- [ ] –°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ contractors
- [ ] –°–æ–∑–¥–∞–Ω –∫–∞–Ω–∞–ª –∏ –±–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∞–¥–º–∏–Ω—ã
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Python 3.9+
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (requirements.txt)
- [ ] –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª .env —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- [ ] –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –¢–µ—Å—Ç–æ–≤–∞—è –∞–Ω–∫–µ—Ç–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞

---

**–ì–æ—Ç–æ–≤–æ! üéâ –í–∞—à –±–æ—Ç –∑–∞–ø—É—â–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!**
