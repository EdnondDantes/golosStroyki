# üí° –ü–†–ò–ú–ï–†–´ –ò –°–û–í–ï–¢–´ –ü–û –†–ê–ó–†–ê–ë–û–¢–ö–ï

## üé® –§–û–†–ú–ê–¢–ò–†–û–í–ê–ù–ò–ï –°–û–û–ë–©–ï–ù–ò–ô –í TELEGRAM

### HTML —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –±–æ—Ç–µ)

```python
# –ñ–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç
"<b>–ñ–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç</b>"

# –ö—É—Ä—Å–∏–≤
"<i>–ö—É—Ä—Å–∏–≤–Ω—ã–π —Ç–µ–∫—Å—Ç</i>"

# –ü–æ–¥—á–µ—Ä–∫–Ω—É—Ç—ã–π
"<u>–ü–æ–¥—á–µ—Ä–∫–Ω—É—Ç—ã–π —Ç–µ–∫—Å—Ç</u>"

# –ó–∞—á–µ—Ä–∫–Ω—É—Ç—ã–π
"<s>–ó–∞—á–µ—Ä–∫–Ω—É—Ç—ã–π —Ç–µ–∫—Å—Ç</s>"

# –ú–æ–Ω–æ—à–∏—Ä–∏–Ω–Ω—ã–π (–∫–æ–¥)
"<code>–∫–æ–¥</code>"

# –ë–ª–æ–∫ –∫–æ–¥–∞
"<pre>–±–ª–æ–∫ –∫–æ–¥–∞</pre>"

# –°—Å—ã–ª–∫–∞
"<a href='https://example.com'>–¢–µ–∫—Å—Ç —Å—Å—ã–ª–∫–∏</a>"

# –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
"<b>–ñ–∏—Ä–Ω—ã–π</b> –∏ <i>–∫—É—Ä—Å–∏–≤</i> <u>–≤–º–µ—Å—Ç–µ</u>"
```

### –ü—Ä–∏–º–µ—Ä—ã –∏–∑ –±–æ—Ç–∞

```python
# –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
await message.answer(
    f"üëã <b>–ü—Ä–∏–≤–µ—Ç, {message.from_user.first_name}!</b>\n\n"
    "–¢—ã –≤ <i>–ö–∞—Ç–∞–ª–æ–≥–µ –ø–æ–¥—Ä—è–¥—á–∏–∫–æ–≤</i> –ø—Ä–æ–µ–∫—Ç–∞ <b>–ì–æ–ª–æ—Å –°—Ç—Ä–æ–π–∫–∏</b>.\n\n"
    "–ó–¥–µ—Å—å —Ç—ã –º–æ–∂–µ—à—å:\n"
    "üîπ –Ω–∞–π—Ç–∏ –Ω–∞–¥—ë–∂–Ω–æ–≥–æ –ø–æ–¥—Ä—è–¥—á–∏–∫–∞\n"
    "üîπ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏\n"
    "üîπ –ø–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç\n"
    "üîπ –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å —Å–µ–±—è –≤ –∫–∞—Ç–∞–ª–æ–≥ (–µ—Å–ª–∏ —Ç—ã –º–∞—Å—Ç–µ—Ä/–∫–æ–º–ø–∞–Ω–∏—è)\n\n"
    "<b>–í—ã–±–µ—Ä–∏, —á—Ç–æ —Ç–µ–±–µ –Ω—É–∂–Ω–æ üëá</b>",
    parse_mode="HTML"
)

# –°–æ–æ–±—â–µ–Ω–∏–µ —Å –ø–æ–¥—Å–∫–∞–∑–∫–æ–π
await message.answer(
    "üìù <b>–®–∞–≥ 1/8 ‚Äî –ò–º—è / –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏</b>\n\n"
    "–ö–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç? –ò–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏?\n\n"
    "üé§ <i>–ú–æ–∂–µ—à—å –æ—Ç–≤–µ—Ç–∏—Ç—å —Ç–µ–∫—Å—Ç–æ–º –∏–ª–∏ –≥–æ–ª–æ—Å–æ–≤—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º</i>",
    parse_mode="HTML"
)

# –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
await message.answer(
    "üéâ <b>–û—Ç–ª–∏—á–Ω–æ!</b>\n\n"
    "–¢–≤–æ—è –∞–Ω–∫–µ—Ç–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é.\n"
    "–ö–æ–≥–¥–∞ –∫–∞—Ä—Ç–æ—á–∫–∞ –±—É–¥–µ—Ç —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ ‚Äî –º—ã –ø—Ä–∏—à–ª—ë–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ.\n\n"
    "‚ú® <i>–û–±—ã—á–Ω–æ –º–æ–¥–µ—Ä–∞—Ü–∏—è –∑–∞–Ω–∏–º–∞–µ—Ç –¥–æ 24 —á–∞—Å–æ–≤</i>",
    parse_mode="HTML"
)
```

## üéØ FSM (Finite State Machine) - –ú–∞—à–∏–Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π

### –ó–∞—á–µ–º –Ω—É–∂–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è?

FSM –ø–æ–∑–≤–æ–ª—è–µ—Ç –±–æ—Ç—É "–ø–æ–º–Ω–∏—Ç—å", –Ω–∞ –∫–∞–∫–æ–º —ç—Ç–∞–ø–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:
- –ó–∞–ø–æ–ª–Ω—è–µ—Ç –∏–º—è?
- –£–∫–∞–∑—ã–≤–∞–µ—Ç –≥–æ—Ä–æ–¥?
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–Ω—Ç–∞–∫—Ç—ã?

### –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π

```python
from aiogram.fsm.state import State, StatesGroup

class ContractorForm(StatesGroup):
    # –ö–∞–∂–¥—ã–π —à–∞–≥ –∞–Ω–∫–µ—Ç—ã = –æ—Ç–¥–µ–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    name = State()              # –®–∞–≥ 1
    city = State()              # –®–∞–≥ 2
    specialization = State()    # –®–∞–≥ 3
    experience = State()        # –®–∞–≥ 4
    description = State()       # –®–∞–≥ 5
    price = State()             # –®–∞–≥ 6
    portfolio = State()         # –®–∞–≥ 7
    contacts = State()          # –®–∞–≥ 8
```

### –†–∞–±–æ—Ç–∞ —Å —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏

```python
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ
await state.set_state(ContractorForm.name)

# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
await state.update_data(name="–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤")

# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
data = await state.get_data()
print(data)  # {'name': '–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤'}

# –û—á–∏—Å—Ç–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–∑–∞–≤–µ—Ä—à–∏—Ç—å –¥–∏–∞–ª–æ–≥)
await state.clear()
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º

```python
# –¢–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ ContractorForm.name
@dp.message(ContractorForm.name, F.text)
async def process_name(message: Message, state: FSMContext):
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–≤–µ—Ç
    await state.update_data(name=message.text)
    
    # –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É
    await state.set_state(ContractorForm.city)
    await message.answer("–í –∫–∞–∫–æ–º –≥–æ—Ä–æ–¥–µ —Ä–∞–±–æ—Ç–∞–µ—à—å?")
```

## üé§ –†–ê–ë–û–¢–ê –° –ì–û–õ–û–°–û–í–´–ú–ò –°–û–û–ë–©–ï–ù–ò–Ø–ú–ò

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –≥–æ–ª–æ—Å–∞

```python
@dp.message(ContractorForm.name, F.voice)
async def process_voice_name(message: Message, state: FSMContext):
    # 1. –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ–∞–π–ª–µ
    file = await bot.get_file(message.voice.file_id)
    
    # 2. –°–∫–∞—á–∏–≤–∞–µ–º —Ñ–∞–π–ª
    file_path = f"/tmp/voice_{message.from_user.id}.ogg"
    await bot.download_file(file.file_path, file_path)
    
    # 3. –†–∞—Å–ø–æ–∑–Ω–∞—ë–º —Ä–µ—á—å
    recognized_text = await recognize_speech(file_path)
    
    # 4. –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    if recognized_text:
        await state.update_data(name=recognized_text)
        await message.answer(f"‚úÖ –ó–∞–ø–∏—Å–∞–Ω–æ: {recognized_text}")
    else:
        await message.answer("‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å. –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑.")
    
    # 5. –£–¥–∞–ª—è–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª
    if os.path.exists(file_path):
        os.remove(file_path)
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Yandex SpeechKit

```python
import aiohttp

async def recognize_speech(file_path: str) -> str:
    url = "https://stt.api.cloud.yandex.net/speech/v1/stt:recognize"
    
    headers = {
        "Authorization": f"Api-Key {YANDEX_API_KEY}",
    }
    
    params = {
        "lang": "ru-RU",
        "folderId": YANDEX_FOLDER_ID,
        "format": "oggopus",  # –§–æ—Ä–º–∞—Ç Telegram voice
    }
    
    async with aiohttp.ClientSession() as session:
        with open(file_path, 'rb') as f:
            data = f.read()
        
        async with session.post(url, headers=headers, params=params, data=data) as response:
            if response.status == 200:
                result = await response.json()
                return result.get('result', '')
            else:
                return ""
```

## ‚å®Ô∏è INLINE –ö–õ–ê–í–ò–ê–¢–£–†–´

### –°–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–æ–ø–æ–∫

```python
from aiogram.types import InlineKeyboardMarkup, InlineKeyboardButton

# –ü—Ä–æ—Å—Ç–∞—è –∫–Ω–æ–ø–∫–∞
keyboard = InlineKeyboardMarkup(inline_keyboard=[
    [InlineKeyboardButton(text="–ù–∞–∂–º–∏ –º–µ–Ω—è", callback_data="button_clicked")]
])

# –ù–µ—Å–∫–æ–ª—å–∫–æ –∫–Ω–æ–ø–æ–∫ –≤ —Ä—è–¥
keyboard = InlineKeyboardMarkup(inline_keyboard=[
    [
        InlineKeyboardButton(text="–î–∞", callback_data="yes"),
        InlineKeyboardButton(text="–ù–µ—Ç", callback_data="no")
    ]
])

# –ö–Ω–æ–ø–∫–∏ –¥—Ä—É–≥ –ø–æ–¥ –¥—Ä—É–≥–æ–º
keyboard = InlineKeyboardMarkup(inline_keyboard=[
    [InlineKeyboardButton(text="–í–∞—Ä–∏–∞–Ω—Ç 1", callback_data="opt1")],
    [InlineKeyboardButton(text="–í–∞—Ä–∏–∞–Ω—Ç 2", callback_data="opt2")],
    [InlineKeyboardButton(text="–í–∞—Ä–∏–∞–Ω—Ç 3", callback_data="opt3")]
])

# –ö–Ω–æ–ø–∫–∞-—Å—Å—ã–ª–∫–∞
keyboard = InlineKeyboardMarkup(inline_keyboard=[
    [InlineKeyboardButton(text="–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å–∞–π—Ç", url="https://example.com")]
])
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏–π

```python
@dp.callback_query(F.data == "button_clicked")
async def button_handler(callback: CallbackQuery):
    # –û—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (–≤—Å–ø–ª—ã–≤–∞—é—â–µ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ)
    await callback.answer("–ö–Ω–æ–ø–∫–∞ –Ω–∞–∂–∞—Ç–∞!")
    
    # –ò–ª–∏ —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º
    await callback.answer("–í–Ω–∏–º–∞–Ω–∏–µ!", show_alert=True)
    
    # –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
    await callback.message.edit_text("–¢–µ–∫—Å—Ç –∏–∑–º–µ–Ω—ë–Ω –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è")
    
    # –ò–ª–∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
    await callback.message.answer("–ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ")
```

## üìä –†–ê–ë–û–¢–ê –° SUPABASE

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

```python
from supabase import create_client, Client

supabase: Client = create_client(SUPABASE_URL, SUPABASE_KEY)
```

### INSERT - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

```python
# –ü—Ä–æ—Å—Ç–æ–π insert
data = {
    "user_id": 123456789,
    "name": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤",
    "city": "–ú–æ—Å–∫–≤–∞"
}
result = supabase.table("contractors").insert(data).execute()

# Insert —Å –≤–æ–∑–≤—Ä–∞—Ç–æ–º –¥–æ–±–∞–≤–ª–µ–Ω–Ω–æ–π –∑–∞–ø–∏—Å–∏
result = supabase.table("contractors").insert(data).execute()
inserted_id = result.data[0]['id']
print(f"–î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–ø–∏—Å—å —Å ID: {inserted_id}")
```

### SELECT - –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

```python
# –í—Å–µ –∑–∞–ø–∏—Å–∏
data = supabase.table("contractors").select("*").execute()

# –° —Ñ–∏–ª—å—Ç—Ä–æ–º
data = supabase.table("contractors")\
    .select("*")\
    .eq("city", "–ú–æ—Å–∫–≤–∞")\
    .execute()

# –ù–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤
data = supabase.table("contractors")\
    .select("*")\
    .eq("city", "–ú–æ—Å–∫–≤–∞")\
    .eq("status", "approved")\
    .execute()

# –° —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π
data = supabase.table("contractors")\
    .select("*")\
    .order("created_at", desc=True)\
    .limit(10)\
    .execute()

# –° –ø–æ–∏—Å–∫–æ–º (LIKE)
data = supabase.table("contractors")\
    .select("*")\
    .ilike("specialization", "%–æ—Ç–¥–µ–ª–∫–∞%")\
    .execute()
```

### UPDATE - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

```python
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ ID
supabase.table("contractors")\
    .update({"status": "approved"})\
    .eq("id", 1)\
    .execute()

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–ª–µ–π
supabase.table("contractors")\
    .update({
        "status": "approved",
        "updated_at": datetime.utcnow().isoformat()
    })\
    .eq("id", 1)\
    .execute()
```

### DELETE - –£–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

```python
# –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ ID
supabase.table("contractors")\
    .delete()\
    .eq("id", 1)\
    .execute()

# –£–¥–∞–ª–µ–Ω–∏–µ —Å —É—Å–ª–æ–≤–∏–µ–º
supabase.table("contractors")\
    .delete()\
    .eq("status", "rejected")\
    .lt("created_at", "2023-01-01")\
    .execute()
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```python
try:
    result = supabase.table("contractors").insert(data).execute()
    print("–£—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ!")
except Exception as e:
    print(f"–û—à–∏–±–∫–∞: {e}")
    # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

## üîç –ü–†–û–í–ï–†–ö–ê –ü–û–î–ü–ò–°–ö–ò –ù–ê –ö–ê–ù–ê–õ

### –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏

```python
async def check_subscription(user_id: int) -> bool:
    try:
        # –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –≤ –∫–∞–Ω–∞–ª–µ
        member = await bot.get_chat_member(
            chat_id=CHANNEL_USERNAME,  # @your_channel
            user_id=user_id
        )
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
        # member, administrator, creator - –ø–æ–¥–ø–∏—Å–∞–Ω
        # left, kicked - –Ω–µ –ø–æ–¥–ø–∏—Å–∞–Ω
        return member.status in ['member', 'administrator', 'creator']
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏: {e}")
        return False
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```python
@dp.message(CommandStart())
async def cmd_start(message: Message):
    user_id = message.from_user.id
    
    if not await check_subscription(user_id):
        await message.answer(
            "–°–Ω–∞—á–∞–ª–∞ –ø–æ–¥–ø–∏—à–∏—Å—å –Ω–∞ –∫–∞–Ω–∞–ª!",
            reply_markup=InlineKeyboardMarkup(inline_keyboard=[
                [InlineKeyboardButton(
                    text="–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è",
                    url=f"https://t.me/{CHANNEL_USERNAME.replace('@', '')}"
                )],
                [InlineKeyboardButton(
                    text="‚úÖ –Ø –ø–æ–¥–ø–∏—Å–∞–ª—Å—è",
                    callback_data="check_sub"
                )]
            ])
        )
        return
    
    # –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Ä–∞–±–æ—Ç—É...
```

## üìù –õ–û–ì–ò–†–û–í–ê–ù–ò–ï

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞

```python
import logging

# –ë–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'
)

logger = logging.getLogger(__name__)
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```python
# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
logger.info("–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω")
logger.info(f"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {user_id} –Ω–∞—á–∞–ª –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–Ω–∫–µ—Ç—ã")

# –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
logger.warning("–ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å")

# –û—à–∏–±–∫–∞
logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –≤ Supabase: {e}")

# –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞
logger.critical("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö!")

# Debug (—Ç–æ–ª—å–∫–æ –ø—Ä–∏ level=logging.DEBUG)
logger.debug(f"–î–∞–Ω–Ω—ã–µ –∞–Ω–∫–µ—Ç—ã: {data}")
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ñ–∞–π–ª

```python
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    handlers=[
        logging.FileHandler("bot.log"),
        logging.StreamHandler()  # –ò –≤ –∫–æ–Ω—Å–æ–ª—å —Ç–æ–∂–µ
    ]
)
```

## üîÑ –ê–°–ò–ù–•–†–û–ù–ù–û–°–¢–¨

### –ß—Ç–æ —Ç–∞–∫–æ–µ async/await?

```python
# –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è (–±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ)
def download_file():
    time.sleep(5)  # –ñ–¥—ë–º 5 —Å–µ–∫—É–Ω–¥
    return "file.txt"

# –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç)
async def download_file_async():
    await asyncio.sleep(5)  # –î—Ä—É–≥–∏–µ –∑–∞–¥–∞—á–∏ –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è
    return "file.txt"
```

### –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

```python
# –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ (–¥–æ–ª–≥–æ)
await task1()
await task2()
await task3()

# –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ (–±—ã—Å—Ç—Ä–æ)
await asyncio.gather(
    task1(),
    task2(),
    task3()
)
```

### –í –±–æ—Ç–µ

```python
# –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
await asyncio.gather(
    message.answer("–°–æ–æ–±—â–µ–Ω–∏–µ 1"),
    message.answer("–°–æ–æ–±—â–µ–Ω–∏–µ 2"),
    message.answer("–°–æ–æ–±—â–µ–Ω–∏–µ 3")
)
```

## üéõÔ∏è –ü–ï–†–ï–ú–ï–ù–ù–´–ï –û–ö–†–£–ñ–ï–ù–ò–Ø

### –ó–∞—á–µ–º –Ω—É–∂–Ω—ã?

- üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–Ω–µ —Ö—Ä–∞–Ω–∏–º —Ç–æ–∫–µ–Ω—ã –≤ –∫–æ–¥–µ)
- üîÑ –ì–∏–±–∫–æ—Å—Ç—å (–ª–µ–≥–∫–æ –º–µ–Ω—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
- üåç –†–∞–∑–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (dev, prod)

### –†–∞–±–æ—Ç–∞ —Å .env

```python
from dotenv import load_dotenv
import os

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ .env
load_dotenv()

# –ü–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
BOT_TOKEN = os.getenv("BOT_TOKEN")

# –° –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º
CHANNEL = os.getenv("CHANNEL_USERNAME", "@default_channel")

# –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è (—Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π)
BOT_TOKEN = os.getenv("BOT_TOKEN")
if not BOT_TOKEN:
    raise ValueError("BOT_TOKEN –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!")
```

### –ü—Ä–∏–º–µ—Ä .env

```env
# –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
BOT_TOKEN=123456789:ABCdefGHI
SUPABASE_URL=https://abc.supabase.co

# –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
BASE_URL=https://api.example.com
API_ENDPOINT=${BASE_URL}/v1/data
```

## üêõ –û–¢–õ–ê–î–ö–ê

### –í—ã–≤–æ–¥ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

```python
# –ü—Ä–æ—Å—Ç–æ print
print(f"User ID: {user_id}")

# –ö—Ä–∞—Å–∏–≤—ã–π –≤—ã–≤–æ–¥ —Å—Ç—Ä—É–∫—Ç—É—Ä
import pprint
pprint.pprint(data)

# –í –ª–æ–≥–∏
logger.debug(f"State data: {await state.get_data()}")
```

### –¢–æ—á–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∞ (breakpoints)

```python
# Python debugger
import pdb

@dp.message(F.text)
async def handler(message: Message):
    pdb.set_trace()  # –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∑–¥–µ—Å—å
    # –ú–æ–∂–Ω–æ —Å–º–æ—Ç—Ä–µ—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–æ–¥
    print(message.text)
```

### Try-except –¥–ª—è –æ—Ç–ª–∞–≤–ª–∏–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫

```python
try:
    result = supabase.table("contractors").insert(data).execute()
except Exception as e:
    logger.error(f"–û—à–∏–±–∫–∞: {e}")
    logger.error(f"–î–∞–Ω–Ω—ã–µ: {data}")
    await message.answer("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π –ø–æ–∑–∂–µ.")
```

## üöÄ –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

```python
from functools import lru_cache

@lru_cache(maxsize=128)
def get_city_list():
    # –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑
    return ["–ú–æ—Å–∫–≤–∞", "–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥", "–ö–∞–∑–∞–Ω—å"]
```

### –ë–∞—Ç—á–∏–Ω–≥ (–ø–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞)

```python
# –ü–ª–æ—Ö–æ - –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤
for item in items:
    supabase.table("contractors").insert(item).execute()

# –•–æ—Ä–æ—à–æ - –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å
supabase.table("contractors").insert(items).execute()
```

### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

```python
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
import aiohttp  # –≤–º–µ—Å—Ç–æ requests
import asyncpg  # –≤–º–µ—Å—Ç–æ psycopg2
```

## üì¶ –ü–û–õ–ï–ó–ù–´–ï –ë–ò–ë–õ–ò–û–¢–ï–ö–ò

```python
# –†–∞–±–æ—Ç–∞ —Å –¥–∞—Ç–∞–º–∏
from datetime import datetime, timedelta
now = datetime.now()
tomorrow = now + timedelta(days=1)

# –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
from pydantic import BaseModel, validator

class Contractor(BaseModel):
    name: str
    city: str
    experience: int
    
    @validator('experience')
    def validate_experience(cls, v):
        if v < 0 or v > 50:
            raise ValueError('–û–ø—ã—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç 0 –¥–æ 50 –ª–µ—Ç')
        return v

# –†–∞–±–æ—Ç–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
from PIL import Image
img = Image.open("photo.jpg")
img.resize((800, 600)).save("photo_resized.jpg")

# –†–∞–±–æ—Ç–∞ —Å Excel
import pandas as pd
df = pd.read_excel("contractors.xlsx")
df.to_csv("contractors.csv")
```

## ‚úÖ –ß–ï–ö–õ–ò–°–¢ –†–ê–ó–†–ê–ë–û–¢–ß–ò–ö–ê

- [ ] –ö–æ–¥ —á–∏—Ç–∞–µ–º—ã–π –∏ –ø–æ–Ω—è—Ç–Ω—ã–π
- [ ] –ï—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (try-except)
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –°–µ–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ .env
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ —Å–ª–æ–∂–Ω—ã–º –º–µ—Å—Ç–∞–º
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- [ ] –ö–æ–¥ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω (black, flake8)
- [ ] –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞
- [ ] –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è async –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ

---

**–£–¥–∞—á–∏ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ! üöÄ**
